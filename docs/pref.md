# Performance Optimization

<!-- 
我们将任务分为如下五种类型：

1. 轻量级同步任务：仅仅执行一些简单的计算或数据处理，执行时间非常短，无须计算资源。
2. 计算密集型同步任务：需要进行计算，需要占据计算资源，执行时间可能较长。
3. I/O密集型异步任务：需要进行I/O操作，多数执行时间用于等待I/O操作完成。
4. 计算密集型批量同步任务：需要批量进行计算，需要占据计算资源，执行时间可能较长。
5. I/O密集型批量异步任务：需要批量进行I/O操作。

根据每一种任务的特点，我们选用合适的执行方式来执行这些任务：

1. 轻量级同步任务：在主节点中启动一个线程池执行这些任务，同时设置 `chunksize=64` 以降低线程切换的开销。
2. 计算密集型同步任务：将这些任务作为 Task 交由 Ray 进行调度和执行，Ray 会自动选择合适的资源来执行这些任务。
3. I/O密集型异步任务：启动一个 Ray Actor 提供事件循环，将这些任务在该 Actor 中异步执行。
4. 计算密集型批量同步任务：启动一个 `Receiver` Actor，在其上异步执行多个 Receiver，作用为等待批量同步执行后的单个结果；同时启动一个独立的 Actor 用于批量执行计算密集型任务，交由 Ray 进行调度和执行。
5. I/O密集型批量异步任务：与计算密集型批量同步任务类似，不同之处在于用于执行批量任务的 Task 将不会被 Ray 单独调度，而是与 Receiver 放在同一个事件循环中执行。
 -->